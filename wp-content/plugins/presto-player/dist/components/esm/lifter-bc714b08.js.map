{"file":"lifter-bc714b08.js","mappings":"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","names":[],"sources":["src/components/core/player/integrations/lifter/helper.js","src/components/core/player/integrations/lifter/lifter.js"],"sourcesContent":["// Mark Complete Button\nconst prevent_default = event => {\n  event.preventDefault();\n};\n\nfunction toggle_mark_complete(enabled) {\n  var $form = jQuery('.llms-complete-lesson-form'),\n    $btn = jQuery('.llms-complete-lesson-form button[type=\"submit\"]'),\n    $links = jQuery('#llms_start_quiz, #llms-start-assignment');\n\n  if (true === enabled) {\n    $form.off('submit', prevent_default);\n    $btn.removeAttr('disabled');\n    $links.removeClass('llms-av-disabled').off('click', prevent_default);\n  } else {\n    $form.on('submit', prevent_default);\n    $btn.attr('disabled', 'disabled');\n    $links.addClass('llms-av-disabled').on('click', prevent_default);\n  }\n}\n\n// Setting and Getting Event meta data\nconst getEventMeta = player => {\n  let eventMeta = {\n    ts: player.currentTime,\n    duration: player.duration,\n    url: player.source,\n    provider: player.provider,\n    id: player.config.id,\n  };\n  return eventMeta;\n};\n\n// tracking event\nconst track_event = (event_id, meta) => {\n  llms.tracking.addEvent('video.' + event_id, {\n    meta: meta,\n  });\n};\n\n// ajax call\nfunction start_countdown($el) {\n  var $seconds = $el.find('.llms-av-pv--seconds'),\n    time;\n\n  setInterval(function () {\n    time = $seconds.text() * 1 - 1;\n    if (1 === time) {\n      $seconds.closest('a')[0].click();\n    }\n\n    if (time >= 0) {\n      $seconds.text(time);\n    }\n  }, 1000);\n}\n\nfunction do_ajax_completion($el, settings) {\n  LLMS.Ajax.call({\n    data: {\n      action: 'llms_av_video_ended',\n      id: settings.post_id,\n      nonce: settings.nonce,\n    },\n    beforeSend: function () {\n      LLMS.Spinner.start($el);\n    },\n    error: function (xhr, status, error) {\n      LLMS.Spinner.stop($el);\n      console.error(xhr.responseText + ' (' + error + ' ' + status + ')'); /* eslint-disable-line no-console */\n      console.log(xhr); /* eslint-disable-line no-console */\n    },\n    success: function (res) {\n      LLMS.Spinner.stop($el);\n      if (res?.html) {\n        $el.append(res.html);\n        start_countdown($el);\n      }\n    },\n  });\n}\n\nexport { getEventMeta, track_event, toggle_mark_complete, do_ajax_completion };\n","import { getEventMeta, track_event, toggle_mark_complete, do_ajax_completion } from './helper';\n\nexport const onPauseVideo = e => {\n  const player = e.detail.plyr;\n  let eventMeta = getEventMeta(player);\n  track_event('paused', eventMeta);\n};\n\nexport const onPlayingVideo = e => {\n  const player = e.detail.plyr;\n  let eventMeta = getEventMeta(player);\n  let event_id = eventMeta.ts < 1 ? 'started' : 'played';\n  track_event(event_id, eventMeta);\n};\n\nexport const onEndedVideo = (e, $el, settings) => {\n  const player = e.detail.plyr;\n  let eventMeta = getEventMeta(player);\n\n  track_event('ended', eventMeta);\n  do_ajax_completion($el, settings);\n  toggle_mark_complete(true);\n};\n\nexport default function (player) {\n  /*\n    Below code is coped from LifterLMS-Advanced-Videos/assets/js/llms.av.js\n    We replaced $ with jQuery.\n  */\n  var settings = {};\n  var tracking_settings = llms?.tracking?.getSettings() || null;\n\n  if (tracking_settings?.av) {\n    settings = tracking_settings.av;\n  }\n\n  /*\n    LifterLMS-Advanced-Videos copied code end.\n    Below code will glue the LifterAV with Presto player.\n  */\n  if (settings.require_video_completion && !settings.video_completed) {\n    toggle_mark_complete(false);\n  }\n\n  let $el = jQuery('.presto-block-video');\n\n  // on end, sync time and autoload content\n  player.on('pause', onPauseVideo);\n  player.on('playing', onPlayingVideo);\n  player.on('ended', e => onEndedVideo(e, $el, settings));\n}\n"],"version":3}