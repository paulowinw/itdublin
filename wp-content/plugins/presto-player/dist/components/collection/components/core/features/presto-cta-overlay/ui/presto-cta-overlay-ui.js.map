{"version":3,"file":"presto-cta-overlay-ui.js","sourceRoot":"","sources":["../../../../../../src/components/core/features/presto-cta-overlay/ui/presto-cta-overlay-ui.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, h, Prop, State } from '@stencil/core';\nimport { ButtonLinkObject, i18nConfig } from '../../../../../interfaces';\nimport fitText from '../../../../../library/fittext.js';\n\n@Component({\n  tag: 'presto-cta-overlay-ui',\n  styleUrl: 'presto-cta-overlay-ui.scss',\n  shadow: true,\n})\nexport class CTAOverlayUI {\n  private textInput?: HTMLInputElement;\n\n  /**\n   * Props\n   */\n  @Prop() headline: string;\n  @Prop() defaultHeadline: string;\n  @Prop() bottomText: string;\n  @Prop() showButton: boolean;\n  @Prop() buttonText: string;\n  @Prop() buttonType: 'link' | 'time';\n  @Prop() buttonLink: ButtonLinkObject;\n  @Prop() allowRewatch: boolean;\n  @Prop() allowSkip: boolean;\n  @Prop() direction?: 'rtl';\n  @Prop() i18n: i18nConfig;\n  @Prop() provider: string;\n  @Prop() type: string;\n\n  /**\n   * State\n   */\n  @State() isAudioProvider: boolean;\n\n  /**\n   * Events\n   */\n  @Event() skip: EventEmitter<void>;\n  @Event() rewatch: EventEmitter<void>;\n\n  /**\n   * Shrink text.\n   */\n  componentDidLoad() {\n    let currentType = this.type || this.provider;\n    this.isAudioProvider = currentType === 'audio' ? true : false;\n    fitText(this.textInput, 3, {\n      maxFontSize: this.isAudioProvider === true ? 15 : 20,\n      minFontSize: 8,\n    });\n  }\n\n  handleCTAClick(e) {\n    if (!this.buttonLink?.url) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    this.handleLink();\n  }\n\n  handleLink() {\n    if (this.buttonLink?.opensInNewTab) {\n      window.open(this.buttonLink?.url, '_blank');\n    } else {\n      window.location.href = this.buttonLink?.url;\n    }\n  }\n\n  render() {\n    return (\n      <div class=\"wrapper\" ref={el => (this.textInput = el as HTMLInputElement)}>\n        <div onClick={e => this.handleCTAClick(e)} class={`overlay ${this.direction === 'rtl' ? 'rtl' : ''} ${this.buttonLink?.url ? 'has-link' : ''}`}>\n          <div class={this.isAudioProvider ? 'content is-centered' : 'content'}>\n            <h1 part=\"cta-headline\">{this.headline || this.defaultHeadline}</h1>\n            {this.bottomText && <p class={this.isAudioProvider && 'is-small'} part=\"cta-bottom-text\" innerHTML={this.bottomText}></p>}\n            {this.showButton && (\n              <presto-player-button\n                full\n                onClick={e => this.handleCTAClick(e)}\n                part=\"cta-button\"\n                href={this?.buttonLink?.url}\n                target={this?.buttonLink?.opensInNewTab ? '_blank' : '_self'}\n                class=\"button\"\n                type=\"primary\"\n              >\n                {this.buttonText}\n              </presto-player-button>\n            )}\n          </div>\n        </div>\n        {!!this.allowRewatch && (\n          <div\n            class=\"rewatch\"\n            onClick={e => {\n              e.preventDefault();\n              e.stopImmediatePropagation();\n              this.rewatch.emit();\n            }}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              stroke-width=\"3\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              class=\"icon icon-corner-up-left\"\n            >\n              <polyline points=\"9 14 4 9 9 4\"></polyline>\n              <path d=\"M20 20v-7a4 4 0 0 0-4-4H4\"></path>\n            </svg>\n            {this?.i18n?.rewatch}\n          </div>\n        )}\n        {!!this.allowSkip && (\n          <div\n            class=\"skip\"\n            onClick={e => {\n              e.preventDefault();\n              this.skip.emit();\n            }}\n          >\n            {this?.i18n?.skip} &rarr;\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]}