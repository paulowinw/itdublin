{"version":3,"file":"muted-autoplay.js","sourceRoot":"","sources":["../../../../../src/components/core/player/functions/muted-autoplay.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,aAAa,CAAC;AAE7C,eAAe,CAAC,EACd,MAAM,EACN,YAAY,EACZ,QAAQ,EACR,QAAQ,EACR,YAAY,EACZ,MAAM,GAQP,EAAE,EAAE;IACH,eAAe;IACf,IAAI,EAAE,GAAG,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;IACpC,IAAI,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;IACvD,IAAI,GAAG,EAAE,CAAC;QACR,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;QACpD,OAAO;IACT,CAAC;IAED,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,GAAG,YAAY,CAAC;IAClD,MAAM,CAAC,KAAK,GAAG,YAAY,CAAC;IAC5B,MAAM,CAAC,IAAI,GAAG,YAAY,CAAC;IAC3B,MAAM,CAAC,MAAM,CAAC,YAAY,GAAG,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC;IAC7D,MAAM,CAAC,MAAM,CAAC,oBAAoB,GAAG,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC;IAEzE,oEAAoE;IACpE,IAAI,CAAC;QACH,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IAC3D,CAAC;IAAC,OAAO,CAAC,EAAE,CAAC,CAAA,CAAC;IAEd,UAAU,CAAC,GAAG,EAAE;QACd,MAAM,MAAM,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;QACtC,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,MAAM,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC;QACD,UAAU,CAAC,GAAG,EAAE;YACd,MAAM,CAAC,KAAK,GAAG,YAAY,CAAC;YAC5B,MAAM,EAAE,CAAC;QACX,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC,EAAE,CAAC,CAAC,CAAC;IAEN,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC","sourcesContent":["import { resumeProgress } from './save-time';\n\nexport default ({\n  player,\n  mutedPreview,\n  captions,\n  progress,\n  savePosition,\n  onPlay,\n}: {\n  player: any;\n  mutedPreview: boolean;\n  captions: boolean;\n  progress: boolean;\n  savePosition: boolean;\n  onPlay: () => void;\n}) => {\n  // skip for iOS\n  var ua = window.navigator.userAgent;\n  var iOS = !!ua.match(/iPad/i) || !!ua.match(/iPhone/i);\n  if (iOS) {\n    console.log('ios device, do not do muted autoplay');\n    return;\n  }\n\n  player.config.mutedPreview.enabled = mutedPreview;\n  player.muted = mutedPreview;\n  player.loop = mutedPreview;\n  player.config.ajaxProgress = mutedPreview ? false : progress;\n  player.config.save_player_position = mutedPreview ? false : savePosition;\n\n  // caption change, catch error due to error in support check of plyr\n  try {\n    player.toggleCaptions(mutedPreview ? !!captions : false);\n  } catch (e) {}\n\n  setTimeout(() => {\n    const resume = resumeProgress(player);\n    if (!resume) {\n      player.restart();\n    }\n    setTimeout(() => {\n      player.muted = mutedPreview;\n      onPlay();\n    }, 50);\n  }, 0);\n\n  return player;\n};\n"]}